{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/button-handler.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/form.js","../src/js/scroll-handler.js","../src/js/load.js","../src/main.js"],"sourcesContent":["const refs = {\n  searchForm: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  notFoundText: document.querySelector('.not-found-text'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst ACTIVE_CLASS = 'active';\n\nconst params = {\n  query: '',\n  page: 1,\n  perPage: 15,\n  maxPage: 1,\n};\n\nexport { refs, ACTIVE_CLASS, params };","import { refs } from './refs';\n\nclass LoadMoreButton {\n  static HIDDEN_CLASS = 'hidden';\n\n  constructor(buttonEl) {\n    if (!buttonEl) return;\n\n    this.button = buttonEl;\n  }\n\n  disable() {\n    this.button.classList.add(LoadMoreButton.HIDDEN_CLASS);\n  }\n\n  enable() {\n    this.button.classList.remove(LoadMoreButton.HIDDEN_CLASS);\n  }\n}\n\nconst loadMoreBtn = new LoadMoreButton(refs.loadMoreBtn);\n\nexport default loadMoreBtn;","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\naxios.defaults.params = {\n  key: '49425225-4fab9228e9772b9206d5850f9',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nasync function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get('', {\n      params: {\n        q: query,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    const { hits, total, totalHits } = response.data;\n\n    return { hits, total, totalHits };\n  } catch (err) {\n    throw new Error(\"Something went wrong while fetching images...\");\n  }\n}\n\nexport default fetchImages;","export const cardsImg = data => {\n  const images = data.hits;\n\n  return images\n    .map(\n      ({\n         webformatURL,\n         largeImageURL,\n         tags,\n         likes,\n         views,\n         comments,\n         downloads,\n       }) => {\n        return `\n      <li class=\"gallery-item\">\n\t\t\t    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t\t\t    <img\n\t\t\t\t\t    class=\"gallery-image\"\n\t\t\t\t\t    src=\"${webformatURL}\"\n\t\t\t\t\t    alt=\"${tags}\"\n\t\t\t\t\t  />\n\t\t\t    </a>\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes:</b> ${likes}\n            </p>\n            <p class=\"info-item\">\n              <b>Views:</b> ${views}\n            </p>\n            <p class=\"info-item\">\n              <b>Comments:</b> ${comments}\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads:</b> ${downloads}\n            </p>\n          </div>\n\t\t    </li>\n      `;\n      }\n    )\n    .join('');\n};","import iziToast from 'izitoast';\nimport loadMoreBtn from './button-handler.js';\nimport fetchImages from './pixabay-api.js';\nimport { cardsImg } from './render-functions.js';\nimport { ACTIVE_CLASS, params, refs } from './refs';\n\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  refs.notFoundText.textContent = '';\n  refs.gallery.innerHTML = '';\n\n  loadMoreBtn.disable();\n  params.page = 1;\n  params.maxPage = 1;\n\n  const form = event.currentTarget;\n  const searchTerm = form.elements.search.value.trim();\n\n  if (!searchTerm) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a valid search query!',\n    });\n\n    return;\n  }\n\n  refs.loader.classList.add(ACTIVE_CLASS);\n\n  try {\n    const images = await fetchImages(searchTerm);\n    refs.loader.classList.remove(ACTIVE_CLASS);\n\n    if (!images.hits || images.hits.length === 0) {\n      refs.notFoundText.innerHTML = `Sorry, there are no images matching your search <span class =\"impotent\">${userQuery}</span>. Please try again!`;\n\n      return;\n    }\n\n    params.query = searchTerm;\n    params.maxPage = Math.ceil(\n      images.totalHits / params.perPage\n    );\n\n    refs.gallery.innerHTML = cardsImg(images);\n\n    if (params.maxPage > 1) {\n      loadMoreBtn.enable();\n    }\n  } catch (error) {\n    refs.loader.classList.remove(ACTIVE_CLASS);\n    iziToast.error({\n      title: 'Error',\n      message: `Error: ${error}`,\n    });\n  } finally {\n    form.reset();\n  }\n}\n\nexport default handleSearch;","import { refs } from './refs';\n\nfunction scrollPage() {\n  const elementGallery = refs.gallery.querySelector('.gallery-item');\n  if(!elementGallery) return;\n\n  const { height } = elementGallery.getBoundingClientRect();\n\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport default scrollPage;","import fetchImages from './pixabay-api.js';\nimport loadMoreBtn from './button-handler.js';\nimport scrollPage from './scroll-handler.js';\nimport { cardsImg } from './render-functions.js';\nimport { params, refs, ACTIVE_CLASS } from './refs';\n\nasync function handleLoadMore(event) {\n  params.page += 1;\n  loadMoreBtn.disable();\n  refs.loader.classList.add(ACTIVE_CLASS);\n\n  try {\n    const { query, page, perPage } = params;\n    const images = await fetchImages(query, page, perPage);\n    refs.gallery.insertAdjacentHTML('beforeend', cardsImg(images));\n\n    refs.loader.classList.remove(ACTIVE_CLASS);\n    loadMoreBtn.enable();\n    scrollPage();\n\n    if (params.page < params.maxPage) {\n      loadMoreBtn.enable();\n    } else {\n      loadMoreBtn.disable();\n      refs.notFoundText.textContent =\n        \"We're sorry, but you've reached the end of search results..\";\n    }\n  } catch (error) {\n    loadMoreBtn.disable();\n  }\n}\n\nexport default handleLoadMore;","import SimpleLightbox from 'simplelightbox';\nimport handleSearch from './js/form';\nimport loadMoreBtn from './js/button-handler.js';\nimport handleLoadMore from './js/load.js';\nimport { refs } from './js/refs.js';\n\nlet lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nrefs.searchForm.addEventListener('submit', async event => {\n  await handleSearch(event);\n  lightbox.refresh();\n});\n\nloadMoreBtn.button.addEventListener('click', async () => {\n  await handleLoadMore();\n  lightbox.refresh();\n});"],"names":["refs","ACTIVE_CLASS","params","_LoadMoreButton","buttonEl","__publicField","LoadMoreButton","loadMoreBtn","axios","fetchImages","query","page","perPage","response","hits","total","totalHits","cardsImg","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","handleSearch","event","form","searchTerm","iziToast","images","error","scrollPage","elementGallery","height","handleLoadMore","lightbox","SimpleLightbox"],"mappings":"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"}